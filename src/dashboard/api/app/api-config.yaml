# swagger.yml

openapi: 3.0.0
info:
  title: "RP Flask REST API"
  description: "An API about people and notes"
  version: "1.0.0"
servers:
  - url: "/api"
paths:
  /init:
    get:
      operationId: "app.endpoints.read_init"
      tags:
        - "Initialisation"
      summary: "Read the list of topics and geometries"
      responses:
        "200":
          description: "Successfully read initialisation"
  /get_ics_data:
    get:
      operationId: "app.endpoints.get_ics_data"
      parameters:
        - name: topic
          in: query
          description: Topic to query
          required: true
          schema:
            type: string
        - name: threshold
          in: query
          description: Threshold above which to subset the data using topic weights
          required: true
          schema:
            type: number
            format: float
        - name: postcode_area
          in: query
          description: Postcode area to query
          required: false
          schema:
            type: string
      tags:
        - "Data by postcode and topic"
      summary: "Data by topic and postcode area"
      responses:
        "200":
          description: "Successfully read postcode data by topic"     
  /get_ics_data_for_country:
    get:
      operationId: "app.endpoints.get_ics_data_country"
      parameters:
        - name: country
          in: query
          description: Country to query
          required: true
          schema:
            type: string
        - name: topic
          in: query
          description: Topic to query
          required: true
          schema:
            type: string
        - name: threshold
          in: query
          description: Threshold above which to subset the data using topic weights
          required: true
          schema:
            type: number
            format: float
        - name: postcode_area
          in: query
          description: Postcode area to query
          required: false
          schema:
            type: string
      tags:
        - "ICS table for Country"
      summary: "ICS table for Country"
      responses:
        "200":
          description: "Successfully read country ICS table" 
  /postcode_data:
    get:
      operationId: "app.endpoints.get_postcode_data"
      parameters:
        - name: postcode_area
          in: query
          description: Postcode area to query
          required: true
          schema:
            type: string
        - name: topic
          in: query
          description: Topic to query
          required: true
          schema:
            type: string
        - name: threshold
          in: query
          description: Threshold above which to subset the data using topic weights
          required: true
          schema:
            type: number
            format: float
      tags:
        - "Data by postcode"
      summary: "Postcode area data by topic"
      responses:
        "200":
          description: "Successfully read postcode data by topic"