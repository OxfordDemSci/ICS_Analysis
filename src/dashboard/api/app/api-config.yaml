# swagger.yml

openapi: 3.0.0
info:
  title: "RP Flask REST API"
  description: "An API about people and notes"
  version: "1.0.0"
servers:
  - url: "/api"
paths:
  /init:
    get:
      operationId: "app.endpoints.read_init"
      tags:
        - "Initialisation"
      summary: "Read the list of topics and initialisation settings"
      responses:
        "200":
          description: "Successfully read initialisation"
  /get_topics:
    get:
      operationId: "app.endpoints.get_ics_topics"
      tags:
        - "Topics"
      summary: "Get the list of topics in ICS database"
      responses:
        "200":
          description: "Succesfully read topics"
  /get_ics_data:
    get:
      operationId: "app.endpoints.get_ics_data"
      parameters:
        - name: threshold
          in: query
          description: Threshold above which to subset the data using topic weights
          required: true
          schema:
            type: number
            format: float
        - name: topic
          in: query
          description: Topic to query
          required: false
          schema:
            type: string
        - name: postcode_area
          in: query
          description: Postcode area to query (Defaults to All if null)
          required: false
          schema:
            type: string
        - name: beneficiary
          in: query
          description: Country/beneficiary to use as filter in addition to topic, threshold and other input parameters (Defaults to All if null)
          required: false
          schema:
            type: string
        - name: uoa
          in: query
          description: UOA/assessment panel to use as filter in addition to topic, threshold and other input parameters (Defaults to All if null; Choice of [A, B, C, D, STEM, SHAPE] - see https://www.ref.ac.uk/about/uoa/)
          required: false
          schema:
            type: string
        - name: funder
          in: query
          description: Funder to use as filter in addition to topic, threshold and other input parameters (Defaults to All if null)
          required: false
          schema:
            type: string
      tags:
        - "Data filtered by topic, threshold (both required), and postcode_area (institutions), beneficiary (country) and uao (all optional). If optional parameters are null, they will default to all"
      summary: "Data by topic and postcode area"
      responses:
        "200":
          description: "Successfully read and filtered topics by parameters"     
  /get_ics_data_for_country:
    get:
      operationId: "app.endpoints.get_ics_data_country"
      parameters:
        - name: country
          in: query
          description: Country to query
          required: true
          schema:
            type: string
        - name: topic
          in: query
          description: Topic to query
          required: true
          schema:
            type: string
        - name: threshold
          in: query
          description: Threshold above which to subset the data using topic weights
          required: true
          schema:
            type: number
            format: float
        - name: postcode_area
          in: query
          description: Postcode area to query
          required: false
          schema:
            type: string
      tags:
        - "ICS table for Country"
      summary: "ICS table for Country"
      responses:
        "200":
          description: "Successfully read country ICS table"