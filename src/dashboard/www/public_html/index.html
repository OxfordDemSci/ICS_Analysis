<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Dashboard</title>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
              integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
              crossorigin=""/>    
        
        <link href="https://cdn.datatables.net/v/dt/dt-1.13.5/datatables.min.css" rel="stylesheet"/>
        
        <link href="css/styles_custom.css?version=1.0" rel="stylesheet" />
     

    </head>
    <body class="sb-nav-fixed">
        <div id="firstloader"></div>
        <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark-navy ">
            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" href="index.html">

                <img class="opacity-75" src="./img/logo/pngegg_w.png" width="160px">

            </a>
            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
            <!-- Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
                <div class="input-group">

                </div>
            </form>
            <!-- Navbar-->
            <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa-solid fa-grip"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" id="btnAbout" href="#">About</a></li>
                        <li><a class="dropdown-item" id="btnGenerateReport" href="#">Generate Report</a></li>
                        <li><a class="dropdown-item" id="btnSettings" href="#">Settings</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item"  id="btnContact" href="#">Contact</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion " id="sidenavAccordion">
                    <div class="sb-sidenav-menu sb-sidenav-dark-navy" style="overflow-y: hidden;">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">Topics</div>
                            <div class="d-flex flex-column align-items-stretch flex-shrink-0 mt-1 scrollarea TopicsWrapper" style="height: calc(100vh - 350px);">
                                <div class="">     
                                    <ul class="list-group list-group-flush  " id="idTopics" style="font-size: 0.8rem;">
                                        <li class="list-group-item ">1</li>
                                        <li class="list-group-item ">2</li>
                                        <li class="list-group-item">3</li>
                                        <li class="list-group-item active">4</li>
                                        <li class="list-group-item">5</li>
                                    </ul>
                                </div>                            
                            </div> 
                            <div class="sb-sidenav-menu-heading">Addons</div>
                            <a class="nav-link" id="ics_table_all_btn" href="#" style="color: white">
                                <div class="sb-nav-link-icon" style="color: white"><i class="fas fa-table" ></i></div>
                                ICS Table
                            </a>
                        </div>
                    </div>
                    <div class="sb-sidenav-footer sb-sidenav-dark-navy-footer">
                        <div class="small align-items-center"> &copy; 2023 University of Oxford <br/> Built by <a href="https://www.gisrede.com" target="_blank">GISRede</a> </div>
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">

                        <div class="row mt-4">
                            <div class="col-xl-2 col-md-2">
                                
                                <div class="card" style="padding-right: 0px; margin-right: 0px;background-color: #002147;min-height: 180px;">
                                    <div class="card-header">
                                        <div  class="d-flex justify-content-between align-items-center" style="color: #fff">
                                            Selected options
                                            <span class="badge bg-primary rounded-pill" 
                                                  id="reload_selected_options" 
                                                  style="visibility: hidden; cursor: pointer"
                                                  data-bs-toggle="tooltip" 
                                                  data-bs-placement="top" 
                                                  data-bs-title="Reload selected options">
                                                <i class="fa-solid fa-arrows-rotate"></i>
                                            </span>
                                        </div>
                                    </div>                                    
                                    <div class="card-body" style="padding: 0px; margin-right: 0px; ">
                                        <ul class="list-group" style="font-size: 0.8rem;">
                                            <li class="list-group-item ">
                                                <label class="text-muted pr-4">Topic :</label> <label id="label_selected_Topics">All Topics</label>
                                            </li>
                                            <li class="list-group-item">
                                                <label class="text-muted pr-4">Institutions :</label>
                                                    <a href="#" 
                                                       id="popover_Institutions" 
                                                       class="text-white" 
                                                       tabindex="0" 
                                                       data-bs-toggle="popover" 
                                                       data-bs-trigger="focus" 
                                                       data-bs-content="ad" style="text-decoration: none">
                                                        <label id="label_selected_Institutions"> All in UK</label>
                                                    </a>
                                            </li>
                                            <li class="list-group-item ">
                                                <label class="text-muted pr-4">Beneficiaries :</label> <label id="label_selected_Beneficiaries"> Global</label>
                                            </li>
                                            <li class="list-group-item ">
                                                <label class="text-muted pr-4">Assessment :</label> <label id="label_selected_Assessment"> All</label>
                                            </li>
                                            <li class="list-group-item ">
                                                <label class="text-muted pr-4">Funder :</label> <label id="label_selected_Funder" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="All"> All</label>
                                            </li>                                            
                                        </ul>                                        
                                    </div>
                                </div>


                                
                                <div class="card bg-white  mb-0" style="padding-right: 0px; margin-right: 0px">
                                    <div class="card-body" style="padding-right: 0px; margin-right: 0px; padding-bottom: 0px">

                                        <div id="info_box" style="overflow-y: auto;width: 100%;">
                                            
                                            <div id="dv_startup" style="display: block">
                                                s
                                            </div>
                                            
                                            <div id="dv_Description_Narrative" style="display: none">
                                                <div class="text-bg-light p-1">Description </div>
                                                    <p id="info_box_topic_description" class="text-700 fw-semi-bold " style="font-size: 0.9rem" >
                                                    </p>
                                                <div class="text-bg-light p-1">Narrative</div>
                                                    <p id="info_box_topic_example" class="text-700 fw-semi-bold mt-2" style="font-size: 0.9rem" >
                                                    </p>  
                                                <div class="text-bg-light p-1">Keywords</div>
                                                    <p id="info_box_topic_keywords" class="text-700 fw-semi-bold mt-2" style="font-size: 0.9rem" >
                                                    </p>                                                     
                                            </div>
                                            
                                        </div>                                      

                                    </div>
                                    <div id="btnViewDetailsInfoBox" class="card-footer d-flex align-items-center justify-content-between" style="">
                                        <p class="small p-0 m-0" >View Details</p>
                                        <div class="small"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-10 col-md-10" >

                                <div class="container-fluid">
                                    <div class="row">

                                        <div class="col-md-6">
                                            <div class="card mb-2" id="chart_cardbox_top_left" style="min-width: 300px">
                                                <div class="card-header">
                                                    <div id="label_Funders" class="d-flex">Funders</div>
                                                </div>
                                                <div class="card-body d-flex justify-content-center" style=" padding: 0px;margin: 0px" >
                                                    <div class="goal-chart-wrapper" id="chartContainer_top_left">
                                                        <div class="" id="Chart_top_left"></div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="card mb-2" id="map_cardbox_top_right" style="min-width: 300px">
                                                <div class="card-header">
                                                    <div><label id="label_Institutions">Institutions</label> <span class="badge bg-secondary" id="Institutions_count">0</span></div>
                                                </div>
                                                <div class="card-body d-flex justify-content-center" style=" padding: 0px;margin: 0px" >

                                                    <div class="bg-white" id="map_uk" style="min-height: 50px;"></div>

                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="row">

                                        <div class="col-md-6">
                                            <div class="card mb-2" id="chart_cardbox_bottom_left" style="min-width: 300px">
                                                <div class="card-header" style="">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="d-flex" id="label_UOA">UOA</div>
                                                        </div>
                                                        <div class="col-md-6 d-flex justify-content-end">

                                                            <div class="d-inline-flex  col-form-label text-right" style="padding-top: 0rem;padding-bottom: 0rem;">
                                                                <label class="form-label d-flex justify-content-end align-items-end pe-3" style="min-width: 130px !important; margin-bottom: 0rem; font-size: 0.9rem">
                                                                    Assessment 
                                                                </label>
                                                                <select id="Options_of_Assessment" class="form-select form-select-sm" style="padding-top: 0rem;padding-bottom: 0rem;">
                                                                    <option value="All">All</option>
                                                                    <option value="A">A</option>
                                                                    <option value="B">B</option>
                                                                    <option value="C">C</option>
                                                                    <option value="D">D</option>
                                                                    <option value="SHAPE">SHAPE</option>
                                                                    <option value="STEM">STEM</option>
                                                                </select>
                                                            </div>          

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-body d-flex justify-content-center" style=" padding: 0px;margin: 0px" >
                                                    <div class="goal-chart-wrapper" id="chartContainer_bottom_left">
                                                        <div class="" id="Chart_bottom_left"></div>
                                                    </div>

                                                </div>
                                            </div> 
                                        </div>

                                        <div class="col-md-6">
                                            <div class="card mb-2" id="map_cardbox_bottom_right" >
                                                <div class="card-header">
                                                    <div ><label id="label_Beneficiaries">Beneficiaries</label> <span class="badge bg-secondary" id="Beneficiaries_count">0</span></div>
                                                </div>
                                                <div class="card-body d-flex justify-content-center" style="padding: 0px;margin: 0px" >

                                                    <div class="bg-white" id="map_global" style="min-height: 50px;"></div>

                                                </div>                                                

                                            </div>
                                        </div>

                                    </div>    
                                </div>

                            </div>
                        </div>
                    </div>
                </main>

                <footer class="py-3 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="row">
                            <div class="col-xl-3 col-md-3 logo-section">
                                <img class="center-block d-block mx-auto"  src="./img/logo/OxLCDSlogo_90.png">
                            </div>
                            <div class="col-xl-3 col-md-3 logo-section">
                                <img class="center-block d-block mx-auto"  src="./img/logo/BA_Primary_90.png">
                            </div>
                            <div class="col-xl-3 col-md-3 logo-section">
                                <img class="center-block d-block mx-auto"  src="./img/logo/AofSS_90.png">
                            </div>
                            <div class="col-xl-3 col-md-3 logo-section">
                                <img class="center-block d-block mx-auto" src="./img/logo/Oxford_Population_Health_90.png">
                            </div>                           
                        </div>
                    </div>
                </footer>


            </div>
        </div>
        
<!--        modals ICS table -->

    <div class="modal fade" id="ics_table_all_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="false">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ics_table_all_modal_title">ICS Table</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table id="tblReportResultsICSTabl" class="table table-striped nowrap table_ICS " cellspacing="0" width="100%"></table>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="btnDownlaodICSTable">Download</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

<!--  end modals ICS table -->

<!--  modals View Details -->
        <div class="modal fade "  data-backdrop="false"  id="idMdViewDetailsInfoBox" tabindex="-1"  aria-labelledby="ModalViewDetailsInfoBox" style="opacity: 0.95;z-index: 2200">
            <div class="modal-dialog shadow-lg modal-lg" style="overflow-y: initial !important"  role="document" id="idModalViewDetailsInfoBox-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="padding: 0.5rem;cursor: move;">
                        <h5 class="modal-title" id="ModalViewDetailsInfoBoxLabel"></h5>                 
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    
                    <div class="modal-body" style="max-height: calc(100vh - 200px); overflow-y: auto">
                        <div class="container">

                            <div id="contectforViewDetailsInfoBox">
                            </div> 

                            <div class="mw-100"> 
                                <div class="form-group col-12">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer p-1" >
                        <button type="button" class="btn btn-secondary btn-sm mr-2" data-bs-dismiss="modal">Close</button> 
                    </div>                    
                </div>
            </div>
        </div>                             
<!-- end  modals View Details -->


<!--  modals Settings -->
<div class="modal fade "  data-backdrop="false"  id="idMdSettings" tabindex="-1"  aria-labelledby="ModalSettings" style="opacity: 0.95;z-index: 2200">
    <div class="modal-dialog"  role="document" id="idModalSettings-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalSettingsLabel"></h5>                 
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <div class="container">

                    <div class="row">

                        <div class="col-sm-6">
                            <label class="form-check-label" for="chCountryLabels">Show country name labels:</label>
                        </div>

                        <div class="col-sm-6">
                            <div class="">
                                <input class="form-check-input" type="checkbox" id="chCountryLabels">                                   
                            </div>                                    
                        </div>

                    </div> 
                    
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-2 pb-2 mb-1 border-bottom"></div>
                        </div>                        
                    </div>

                    <div class="row mt-2">

                        <div class="col-sm-6">
                            <label class="form-check-label" for="chCountryLabels">Number of funders to show on chart plot:</label>
                        </div>

                        <div class="col-sm-6">
                            <select id="numberFundersLimit" class="form-select form-select-sm" style="padding-top: 0rem;padding-bottom: 0rem;">
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="30" selected>30</option>
                                <option value="40">40</option>
                                <option value="50">50</option>
                                <option value="60">60</option>
                            </select>                               
                        </div>

                    </div>  
                    
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-2 pb-2 mb-1 border-bottom"></div>
                        </div>                        
                    </div>                    

                    <div class="row">

                        <div class="col-sm-6">
                            <label class="form-check-label" for="chKeepPOSTarea">Show other postcodes when one is selected:</label>
                        </div>

                        <div class="col-sm-6">
                            <div class="">
                                <input class="form-check-input" type="checkbox" id="chKeepPOSTarea" checked>                                   
                            </div>                                    
                        </div>

                    </div> 
                    
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-2 pb-2 mb-1 border-bottom"></div>
                        </div>                        
                    </div>
                    
                    <div class="row mt-2">

                        <div class="col-sm-6">
                            <label id="idMdSettingsLabel" >ICS threshold [<strong> <label id="idMdSettingsThresholdValue" >0.5</label> ]</strong></label>
                        </div>

                        <div class="col-sm-6">
                            <div class="mt-1">
                                <input type="range" class="form-range" min="0" max="1" value="0.5" step="0.1" id="customRangeThreshold">
                                <div class="container" style="margin-top: -10px; padding-right:0px; padding-left:0px">                                    
                                    <div class="row" >
                                        <div class="col" style="font-family: 'Poppins', sans-serif;color: black;font-size: 0.85em;color: #888">Less</div>
                                        <div class="col col-sm-auto">
                                            <div class="float-right" style="font-family: 'Poppins', sans-serif;color: black;font-size: 0.85em;color: #888">More</div>
                                        </div>
                                    </div>
                                </div>                                    
                            </div>                                    
                        </div>
                    </div>


                </div>
            </div>

            <div class="modal-footer p-1" >
                <button type="button" class="btn btn-secondary btn-sm mr-2" data-bs-dismiss="modal">Close</button> 
            </div>                    
        </div>
    </div>
</div>                             
<!-- end  modals Settings -->



<!--  modals Settings -->
<div class="modal fade "  data-backdrop="false"  id="idMdContact" tabindex="-1"  aria-labelledby="ModalContact" style="opacity: 0.95;z-index: 2200">
    <div class="modal-dialog"  role="document" id="idModalContact-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalContactLabel">Contact</h5>                 
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <div class="container">
                   <div class="row">
                        <div class="col-sm-12">
                            <label id="lblContact"></label>
                        </div>                        
                    </div>

                </div>
            </div>

            <div class="modal-footer p-1" >
                <button type="button" class="btn btn-secondary btn-sm mr-2" data-bs-dismiss="modal">Close</button> 
            </div>                    
        </div>
    </div>
</div>                             
<!-- end  modals Settings -->


<!--  modals About -->
        <div class="modal fade "  data-backdrop="false"  id="idMdAbout" tabindex="-1"  aria-labelledby="ModalAbout" style="opacity: 0.95;z-index: 2200">
            <div class="modal-dialog shadow-lg modal-lg" style="overflow-y: initial !important"  role="document" id="idModalAbout-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="padding: 0.5rem;cursor: move;">
                        <h5 class="modal-title" id="ModalAboutLabel">About</h5>                 
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    
                    <div class="modal-body" style="max-height: calc(100vh - 200px); overflow-y: auto">
                        <div class="container">

                            <div id="contentAbout">
                                
                            </div> 

                            <div class="mw-100"> 
                                <div class="form-group col-12">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer p-1" >
                        <button type="button" class="btn btn-secondary btn-sm mr-2" data-bs-dismiss="modal">Close</button> 
                    </div>                    
                </div>
            </div>
        </div>                             
<!-- end  modals About -->


<!--<div id="ics_table_all_modal" class="modal-dialog modal-fullscreen-sm-down fade" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1" style="z-index: 99999">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalToggleLabel">Modal 1</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Show a second modal and hide this one with the button below.
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Open second modal</button>
      </div>
    </div>
  </div>
</div>-->
<!-- modals end        -->
        
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
        <!--        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>-->
        <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
        <script src="js/datatables-simple-demo.js"></script>

        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>     
        
        
        <script src="https://cdn.datatables.net/v/dt/dt-1.13.5/datatables.min.js"></script>
        <script src="js/DataTables/dataRender/ellipsis.min.js"></script>
    </body>
</html>

<script src="./js/main.js?version=6.3" type="module"></script>





<script type="text/javascript">

$(document).ready(function () {

//var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
//var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//    return new bootstrap.Popover(popoverTriggerEl,{html: true})
//});


const popover_InstitutionsEl = document.getElementById('popover_Institutions')
const popover_Institutions = new bootstrap.Popover(popover_InstitutionsEl,{html: true})
popover_Institutions.disable();
//var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
//var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//  return new bootstrap.Popover(popoverTriggerEl,{html: true})
//})

$('[data-bs-toggle="tooltip"]').tooltip();

});



//   $(window).on('load', function() {
//       $('#idMdSettings').modal('show');
//    });
//    


//console.log(aDemoItems);

//$(window).on('load', function(){
//  $('.modal-fullscreen-sm-down.fade').appendTo('body');
//});
</script>   


